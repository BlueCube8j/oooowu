-- –ü–æ–ª–Ω—ã–π –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –±–æ—Ç–∞ –¥–ª—è Roblox
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")

-- –í–ª–∞–¥–µ–ª–µ—Ü –±–æ—Ç–∞ (—Ç–æ–ª—å–∫–æ –æ–Ω –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã)
local OWNER_NAME = "ryveliq"
local BOT_NAME = "NoNameDarkTouched"

-- –°–∏—Å—Ç–µ–º–∞ –∫–æ–º–∞–Ω–¥
local CommandSystem = {
    ActiveEffects = {},
    CommandHistory = {}
}

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤—Å–µ—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
function CommandSystem:stopAllEffects()
    for name, connection in pairs(self.ActiveEffects) do
        if connection then
            connection:Disconnect()
        end
    end
    self.ActiveEffects = {}
end

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –º–µ–∂–¥—É –∏–≥—Ä–æ–∫–∞–º–∏
function CommandSystem:getDistance(player1, player2)
    if not player1.Character or not player2.Character then return 999 end
    local hrp1 = player1.Character:FindFirstChild("HumanoidRootPart")
    local hrp2 = player2.Character:FindFirstChild("HumanoidRootPart")
    if not hrp1 or not hrp2 then return 999 end
    return (hrp1.Position - hrp2.Position).Magnitude
end

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–∫–æ—Ä–æ—Å—Ç–∏ –±–æ—Ç–∞
function CommandSystem:setSpeed(speedValue)
    local botPlayer = Players:FindFirstChild(BOT_NAME)
    if not botPlayer or not botPlayer.Character then return false end
    
    local speed = tonumber(speedValue)
    if not speed or speed < 10 or speed > 100 then
        game:GetService("TextChatService").TextChannels.RBXGeneral:SendAsync("[BOT] Speed must be between 10-100!")
        return false
    end
    
    local humanoid = botPlayer.Character:FindFirstChildOfClass("Humanoid")
    if humanoid then
        humanoid.WalkSpeed = speed
        game:GetService("TextChatService").TextChannels.RBXGeneral:SendAsync("[BOT] Speed set to " .. speed)
        return true
    end
    return false
end

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ñ–ª–∏–Ω–≥–∞ (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –ø–æ —Ç–≤–æ–µ–º—É –ø—Ä–∏–º–µ—Ä—É)
function CommandSystem:flingTarget(targetHRP)
    if not targetHRP or not targetHRP:IsA("BasePart") then return false end
    
    local originalVelocity = targetHRP.Velocity
    local flingPower = 50000
    
    -- –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–ª–∏–Ω–≥ (–∫–∞–∫ –≤ —Ç–≤–æ–µ–º —Å–∫—Ä–∏–ø—Ç–µ)
    targetHRP.Velocity = originalVelocity * flingPower + Vector3.new(0, flingPower, 0)
    RunService.RenderStepped:Wait()
    
    if targetHRP and targetHRP.Parent then
        targetHRP.Velocity = originalVelocity
    end
    
    RunService.Stepped:Wait()
    
    if targetHRP and targetHRP.Parent then
        targetHRP.Velocity = originalVelocity + Vector3.new(0, 0.1, 0)
    end
    
    return true
end

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –∑–∞ –∏–≥—Ä–æ–∫–æ–º (—Å –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º –ø–æ–∑–∏—Ü–∏–∏)
function CommandSystem:startFollow(targetPlayerName)
    local botPlayer = Players:FindFirstChild(BOT_NAME)
    local targetPlayer = Players:FindFirstChild(targetPlayerName)
    
    if not botPlayer or not botPlayer.Character then return false end
    if not targetPlayer or not targetPlayer.Character then return false end

    self:stopAllEffects()
    
    local followConnection
    local lastPositionChange = 0
    local currentOffset = Vector3.new(2, 0, 2)
    
    followConnection = RunService.Heartbeat:Connect(function()
        if not botPlayer.Character or not targetPlayer.Character then
            followConnection:Disconnect()
            return
        end
        
        local botHRP = botPlayer.Character:FindFirstChild("HumanoidRootPart")
        local targetHRP = targetPlayer.Character:FindFirstChild("HumanoidRootPart")
        local botHumanoid = botPlayer.Character:FindFirstChildOfClass("Humanoid")
        
        if not botHRP or not targetHRP or not botHumanoid then return end
        
        -- –ú–µ–Ω—è—Ç—å –ø–æ–∑–∏—Ü–∏—é –∫–∞–∂–¥—ã–µ 5-6 —Å–µ–∫—É–Ω–¥ –µ—Å–ª–∏ –∏–≥—Ä–æ–∫ —Å—Ç–æ–∏—Ç
        if tick() - lastPositionChange > math.random(5, 6) then
            lastPositionChange = tick()
            currentOffset = Vector3.new(
                math.random(-3, 3),
                0,
                math.random(-3, 3)
            )
        end
        
        local distance = (targetHRP.Position - botHRP.Position).Magnitude
        if distance > 5 then
            botHumanoid:MoveTo(targetHRP.Position + currentOffset)
        end
    end)
    
    self.ActiveEffects["follow"] = followConnection
    return true
end

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–∏–¥–µ–Ω–∏—è –Ω–∞ –≥–æ–ª–æ–≤–µ (—Å –∞–Ω–∏–º–∞—Ü–∏–µ–π —Å–∏–¥–µ–Ω–∏—è)
function CommandSystem:startHeadsit(targetPlayerName)
    local botPlayer = Players:FindFirstChild(BOT_NAME)
    local targetPlayer = Players:FindFirstChild(targetPlayerName)
    
    if not botPlayer or not botPlayer.Character then return false end
    if not targetPlayer or not targetPlayer.Character then return false end

    self:stopAllEffects()
    
    -- –ó–∞—Å—Ç–∞–≤–∏—Ç—å –±–æ—Ç–∞ —Å–∏–¥–µ—Ç—å
    local humanoid = botPlayer.Character:FindFirstChildOfClass("Humanoid")
    if humanoid then
        humanoid.Sit = true
    end
    
    local headsitConnection
    headsitConnection = RunService.Heartbeat:Connect(function()
        if not botPlayer.Character or not targetPlayer.Character then
            headsitConnection:Disconnect()
            return
        end
        
        local botHRP = botPlayer.Character:FindFirstChild("HumanoidRootPart")
        local targetHRP = targetPlayer.Character:FindFirstChild("HumanoidRootPart")
        
        if not botHRP or not targetHRP then return end
        
        -- –ü–æ–∑–∏—Ü–∏—è –Ω–∞–¥ –≥–æ–ª–æ–≤–æ–π
        local headPosition = targetHRP.Position + Vector3.new(0, 4, 0)
        botHRP.CFrame = CFrame.new(headPosition)
    end)
    
    self.ActiveEffects["headsit"] = headsitConnection
    return true
end

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∫–æ–≤—Ä–∞
function CommandSystem:startCarpet(targetPlayerName)
    local botPlayer = Players:FindFirstChild(BOT_NAME)
    local targetPlayer = Players:FindFirstChild(targetPlayerName)
    
    if not botPlayer or not botPlayer.Character then return false end
    if not targetPlayer or not targetPlayer.Character then return false end

    self:stopAllEffects()
    
    local carpetConnection
    carpetConnection = RunService.Heartbeat:Connect(function()
        if not botPlayer.Character or not targetPlayer.Character then
            carpetConnection:Disconnect()
            return
        end
        
        local botHRP = botPlayer.Character:FindFirstChild("HumanoidRootPart")
        local targetHRP = targetPlayer.Character:FindFirstChild("HumanoidRootPart")
        
        if not botHRP or not targetHRP then return end
        
        -- –ü–æ–∑–∏—Ü–∏—è –ø–æ–¥ –∏–≥—Ä–æ–∫–æ–º
        local underPosition = targetHRP.Position - Vector3.new(0, 3, 0)
        botHRP.CFrame = CFrame.new(underPosition)
    end)
    
    self.ActiveEffects["carpet"] = carpetConnection
    return true
end

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ñ–ª–∏–Ω–≥–æ–≤–∞–Ω–∏—è (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è)
function CommandSystem:startFling(targetPlayerName)
    local botPlayer = Players:FindFirstChild(BOT_NAME)
    local targetPlayer = Players:FindFirstChild(targetPlayerName)
    
    if not botPlayer or not botPlayer.Character then return false end
    if not targetPlayer or not targetPlayer.Character then return false end

    local distance = self:getDistance(botPlayer, targetPlayer)
    if distance > 200 then
        return false
    end

    self:stopAllEffects()
    
    local flingConnection
    flingConnection = RunService.Heartbeat:Connect(function()
        if not botPlayer.Character or not targetPlayer.Character then
            flingConnection:Disconnect()
            return
        end
        
        local botHRP = botPlayer.Character:FindFirstChild("HumanoidRootPart")
        local targetHRP = targetPlayer.Character:FindFirstChild("HumanoidRootPart")
        local botHumanoid = botPlayer.Character:FindFirstChildOfClass("Humanoid")
        
        if not botHRP or not targetHRP or not botHumanoid then return end
        
        local currentDistance = self:getDistance(botPlayer, targetPlayer)
        if currentDistance <= 40 then
            -- –§–ª–∏–Ω–≥ —Ü–µ–ª—å
            self:flingTarget(targetHRP)
        else
            -- –î–≤–∏–≥–∞—Ç—å—Å—è –∫ —Ü–µ–ª–∏
            botHumanoid:MoveTo(targetHRP.Position)
        end
    end)
    
    self.ActiveEffects["fling"] = flingConnection
    return true
end

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ç–∞–Ω—Ü–µ–≤
function CommandSystem:startDance(targetPlayerName)
    local botPlayer = Players:FindFirstChild(BOT_NAME)
    local targetPlayer = Players:FindFirstChild(targetPlayerName)
    
    if not botPlayer or not botPlayer.Character then return false end
    if not targetPlayer or not targetPlayer.Character then return false end

    self:stopAllEffects()
    
    local danceConnection
    local danceAngle = 0
    danceConnection = RunService.Heartbeat:Connect(function()
        if not botPlayer.Character or not targetPlayer.Character then
            danceConnection:Disconnect()
            return
        end
        
        local botHRP = botPlayer.Character:FindFirstChild("HumanoidRootPart")
        local targetHRP = targetPlayer.Character:FindFirstChild("HumanoidRootPart")
        
        if not botHRP or not targetHRP then return end
        
        -- –î–≤–∏–≥–∞—Ç—å—Å—è —Ä—è–¥–æ–º –∏ —Ç–∞–Ω—Ü–µ–≤–∞—Ç—å
        local dancePosition = targetHRP.Position + Vector3.new(3, 0, 3)
        danceAngle = danceAngle + 0.1
        botHRP.CFrame = CFrame.new(dancePosition) * CFrame.Angles(0, danceAngle, 0)
    end)
    
    self.ActiveEffects["dance"] = danceConnection
    return true
end

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç–æ–≤
function CommandSystem:sendLike(targetPlayerName)
    local botPlayer = Players:FindFirstChild(BOT_NAME)
    local targetPlayer = Players:FindFirstChild(targetPlayerName)
    
    if not botPlayer then return false end
    if not targetPlayer then return false end

    local distance = self:getDistance(botPlayer, targetPlayer)
    if distance > 100 then
        game:GetService("TextChatService").TextChannels.RBXGeneral:SendAsync("[BOT] too far!")
        return false
    end

    local compliments = {
        "hey! you got awesome skinüòÅ",
        "hii, you look good!",
        "I almost fainted, when I saw your skinüòç",
        "wow, amazing avatar!",
        "you're looking great today!",
        "nice style! üòä"
    }
    
    local randomCompliment = compliments[math.random(1, #compliments)]
    game:GetService("TextChatService").TextChannels.RBXGeneral:SendAsync("[BOT] " .. randomCompliment)
    return true
end

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ bang
function CommandSystem:startBang(targetPlayerName)
    local botPlayer = Players:FindFirstChild(BOT_NAME)
    local targetPlayer = Players:FindFirstChild(targetPlayerName)
    
    if not botPlayer or not botPlayer.Character then return false end
    if not targetPlayer or not targetPlayer.Character then return false end

    self:stopAllEffects()
    
    local bangConnection
    bangConnection = RunService.Heartbeat:Connect(function()
        if not botPlayer.Character or not targetPlayer.Character then
            bangConnection:Disconnect()
            return
        end
        
        local botHRP = botPlayer.Character:FindFirstChild("HumanoidRootPart")
        local targetHRP = targetPlayer.Character:FindFirstChild("HumanoidRootPart")
        
        if not botHRP or not targetHRP then return end
        
        -- –ü–æ–∑–∏—Ü–∏—è —Å–∑–∞–¥–∏ –∏–≥—Ä–æ–∫–∞
        local behindPosition = targetHRP.Position - targetHRP.CFrame.LookVector * 3
        botHRP.CFrame = CFrame.new(behindPosition) * CFrame.Angles(0, math.pi, 0)
    end)
    
    self.ActiveEffects["bang"] = bangConnection
    return true
end

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—Ä–∞—â–µ–Ω–∏—è
function CommandSystem:startSpin(speed)
    local botPlayer = Players:FindFirstChild(BOT_NAME)
    if not botPlayer or not botPlayer.Character then return false end
    
    local speed = tonumber(speed) or 30
    local humanoidRootPart = botPlayer.Character:FindFirstChild("HumanoidRootPart")
    if not humanoidRootPart then return false end
    
    self:stopAllEffects()
    
    local spinConnection
    local angle = 0
    spinConnection = RunService.Heartbeat:Connect(function()
        if not botPlayer.Character or not humanoidRootPart then
            spinConnection:Disconnect()
            return
        end
        
        angle = angle + speed * 0.1
        humanoidRootPart.CFrame = humanoidRootPart.CFrame * CFrame.Angles(0, math.rad(angle), 0)
    end)
    
    self.ActiveEffects["spin"] = spinConnection
    return true
end

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä—ã–∂–∫–æ–≤ (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è)
function CommandSystem:startJump()
    local botPlayer = Players:FindFirstChild(BOT_NAME)
    if not botPlayer or not botPlayer.Character then return false end
    
    local humanoid = botPlayer.Character:FindFirstChildOfClass("Humanoid")
    if not humanoid then return false end
    
    self:stopAllEffects()
    
    local jumpConnection
    local lastJump = 0
    jumpConnection = RunService.Heartbeat:Connect(function()
        if not botPlayer.Character or not humanoid then
            jumpConnection:Disconnect()
            return
        end
        
        -- –ü—Ä—ã–≥–∞—Ç—å –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã
        if tick() - lastJump > 2 then
            lastJump = tick()
            humanoid.Jump = true
        end
    end)
    
    self.ActiveEffects["jump"] = jumpConnection
    return true
end

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞ –∫ –∏–≥—Ä–æ–∫—É
function CommandSystem:startGoto(targetPlayerName)
    local botPlayer = Players:FindFirstChild(BOT_NAME)
    local targetPlayer = Players:FindFirstChild(targetPlayerName)
    
    if not botPlayer or not botPlayer.Character then return false end
    if not targetPlayer or not targetPlayer.Character then return false end
    
    local botHRP = botPlayer.Character:FindFirstChild("HumanoidRootPart")
    local targetHRP = targetPlayer.Character:FindFirstChild("HumanoidRootPart")
    
    if not botHRP or not targetHRP then return false end
    
    botHRP.CFrame = targetHRP.CFrame + Vector3.new(3, 0, 3)
    return true
end

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—Ä–∞—â–µ–Ω–∏—è –≤–æ–∫—Ä—É–≥ –∏–≥—Ä–æ–∫–∞
function CommandSystem:startOrbit(targetPlayerName, speed)
    local botPlayer = Players:FindFirstChild(BOT_NAME)
    local targetPlayer = Players:FindFirstChild(targetPlayerName)
    
    if not botPlayer or not botPlayer.Character then return false end
    if not targetPlayer or not targetPlayer.Character then return false end
    
    local speed = tonumber(speed) or 20
    
    self:stopAllEffects()
    
    local orbitConnection
    local angle = 0
    orbitConnection = RunService.Heartbeat:Connect(function()
        if not botPlayer.Character or not targetPlayer.Character then
            orbitConnection:Disconnect()
            return
        end
        
        local botHRP = botPlayer.Character:FindFirstChild("HumanoidRootPart")
        local targetHRP = targetPlayer.Character:FindFirstChild("HumanoidRootPart")
        
        if not botHRP or not targetHRP then return end
        
        angle = angle + speed * 0.01
        local radius = 5
        local x = math.cos(angle) * radius
        local z = math.sin(angle) * radius
        
        local orbitPosition = targetHRP.Position + Vector3.new(x, 2, z)
        botHRP.CFrame = CFrame.new(orbitPosition)
    end)
    
    self.ActiveEffects["orbit"] = orbitConnection
    return true
end

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ –≤ –¥—Ä—É–∑—å—è
function CommandSystem:sendFriendRequest(targetPlayerName)
    local botPlayer = Players:FindFirstChild(BOT_NAME)
    local targetPlayer = Players:FindFirstChild(targetPlayerName)
    
    if not botPlayer then return false end
    if not targetPlayer then return false end

    pcall(function()
        game:GetService("TextChatService").TextChannels.RBXGeneral:SendAsync("[BOT] Sent friend request to " .. targetPlayerName)
    end)
    return true
end

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤–∑–≥–ª—è–¥–∞ –Ω–∞ –∏–≥—Ä–æ–∫–∞ (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è)
function CommandSystem:startLook(targetPlayerName)
    local botPlayer = Players:FindFirstChild(BOT_NAME)
    local targetPlayer = Players:FindFirstChild(targetPlayerName)
    
    if not botPlayer or not botPlayer.Character then return false end
    if not targetPlayer or not targetPlayer.Character then return false end

    self:stopAllEffects()
    
    local lookConnection
    lookConnection = RunService.Heartbeat:Connect(function()
        if not botPlayer.Character or not targetPlayer.Character then
            lookConnection:Disconnect()
            return
        end
        
        local botHRP = botPlayer.Character:FindFirstChild("HumanoidRootPart")
        local targetHRP = targetPlayer.Character:FindFirstChild("HumanoidRootPart")
        
        if not botHRP or not targetHRP then return end
        
        -- –°–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ –∏–≥—Ä–æ–∫–∞ (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ)
        local lookAt = targetHRP.Position
        botHRP.CFrame = CFrame.lookAt(botHRP.Position, Vector3.new(lookAt.X, botHRP.Position.Y, lookAt.Z))
    end)
    
    self.ActiveEffects["look"] = lookConnection
    return true
end

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–µ—Å–µ—Ç–∞ –±–æ—Ç–∞
function CommandSystem:resetBot()
    local botPlayer = Players:FindFirstChild(BOT_NAME)
    if not botPlayer then return false end
    
    self:stopAllEffects()
    
    if botPlayer.Character then
        botPlayer.Character:BreakJoints()
    end
    
    return true
end

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –º–∞—Ö–∞–Ω–∏—è
function CommandSystem:startWave(targetPlayerName)
    local botPlayer = Players:FindFirstChild(BOT_NAME)
    local targetPlayer = Players:FindFirstChild(targetPlayerName)
    
    if not botPlayer or not botPlayer.Character then return false end
    if not targetPlayer or not targetPlayer.Character then return false end

    local distance = self:getDistance(botPlayer, targetPlayer)
    if distance > 100 then
        return false
    end

    self:stopAllEffects()
    
    -- –¢–µ–ª–µ–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –±–ª–∏–∂–µ
    local botHRP = botPlayer.Character:FindFirstChild("HumanoidRootPart")
    local targetHRP = targetPlayer.Character:FindFirstChild("HumanoidRootPart")
    
    if botHRP and targetHRP then
        botHRP.CFrame = targetHRP.CFrame + Vector3.new(5, 0, 5)
    end
    
    -- –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –º–∞—Ö–∞–Ω–∏–µ–º
    game:GetService("TextChatService").TextChannels.RBXGeneral:SendAsync("[BOT] üëã Hello " .. targetPlayerName .. "!")
    return true
end

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ö—Ä–∞–Ω—ã (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è)
function CommandSystem:startGuard(targetPlayerName)
    local botPlayer = Players:FindFirstChild(BOT_NAME)
    local targetPlayer = Players:FindFirstChild(targetPlayerName)
    
    if not botPlayer or not botPlayer.Character then return false end
    if not targetPlayer or not targetPlayer.Character then return false end

    self:stopAllEffects()
    
    -- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–∫–æ—Ä–æ—Å—Ç—å –±–æ—Ç–∞
    local botHumanoid = botPlayer.Character:FindFirstChildOfClass("Humanoid")
    if botHumanoid then
        botHumanoid.WalkSpeed = 23
    end
    
    local guardConnection
    local lastAction = 0
    local lastPositionChange = 0
    local guardOffset = Vector3.new(7, 0, 0)
    
    guardConnection = RunService.Heartbeat:Connect(function()
        if not botPlayer.Character or not targetPlayer.Character then
            guardConnection:Disconnect()
            return
        end
        
        local botHRP = botPlayer.Character:FindFirstChild("HumanoidRootPart")
        local targetHRP = targetPlayer.Character:FindFirstChild("HumanoidRootPart")
        local botHumanoid = botPlayer.Character:FindFirstChildOfClass("Humanoid")
        
        if not botHRP or not targetHRP or not botHumanoid then return end
        
        -- –ú–µ–Ω—è—Ç—å –ø–æ–∑–∏—Ü–∏—é –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
        if tick() - lastPositionChange > 5 then
            lastPositionChange = tick()
            local angle = math.random() * math.pi * 2
            guardOffset = Vector3.new(math.cos(angle) * 7, 0, math.sin(angle) * 7)
        end
        
        -- –°—Ç–æ—è—Ç—å –Ω–∞ –ø–æ–∑–∏—Ü–∏–∏ –æ—Ö—Ä–∞–Ω—ã
        botHumanoid:MoveTo(targetHRP.Position + guardOffset)
        
        -- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ—Ö –∏–≥—Ä–æ–∫–æ–≤ –≤–æ–∫—Ä—É–≥
        for _, player in pairs(Players:GetPlayers()) do
            if player ~= targetPlayer and player ~= botPlayer and player.Character then
                local playerHRP = player.Character:FindFirstChild("HumanoidRootPart")
                if playerHRP then
                    local distanceToTarget = (playerHRP.Position - targetHRP.Position).Magnitude
                    
                    -- –ï—Å–ª–∏ –≤—Ä–∞–≥ –≤ –∑–æ–Ω–µ –∞—Ç–∞–∫–∏ (8-12 studs)
                    if distanceToTarget >= 8 and distanceToTarget <= 12 then
                        botHumanoid:MoveTo(playerHRP.Position)
                        wait(0.3)
                        -- –§–ª–∏–Ω–≥ –≤—Ä–∞–≥–∞
                        self:flingTarget(playerHRP)
                        break
                    end
                end
            end
        end
        
        -- –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –¥–µ–ª–∞—Ç—å –¥–µ–π—Å—Ç–≤–∏—è
        if tick() - lastAction > 3 then
            lastAction = tick()
            local randomAction = math.random(1, 3)
            if randomAction == 1 then
                -- –ü–æ–∫—Ä—É–∂–∏—Ç—å—Å—è
                botHRP.CFrame = botHRP.CFrame * CFrame.Angles(0, math.rad(90), 0)
            elseif randomAction == 2 then
                -- –ü–æ–¥–ø—Ä—ã–≥–Ω—É—Ç—å
                botHumanoid.Jump = true
            end
        end
    end)
    
    self.ActiveEffects["guard"] = guardConnection
    return true
end

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ –∫–æ–º–∞–Ω–¥ (–≤ –æ–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ)
function CommandSystem:showCommands(ownerPlayer)
    local commandsMessage = [[
[BOT] –ö–æ–º–∞–Ω–¥—ã:
.follow .headsit .carpet .fling
.dance .like .bang .spin .jump  
.goto .orbit .invite .look .reset
.wave .guard .speed .stop .cmds
]]
    
    -- –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ —á–∞—Ç –æ–¥–Ω–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º
    game:GetService("TextChatService").TextChannels.RBXGeneral:SendAsync(commandsMessage)
end

-- –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–æ–º–∞–Ω–¥
function CommandSystem:processCommand(ownerPlayer, message)
    if ownerPlayer.Name ~= OWNER_NAME then return end
    
    local args = {}
    for word in message:gmatch("%S+") do
        table.insert(args, word:lower())
    end
    
    if #args == 0 then return end
    
    local command = args[1]
    
    if command == ".follow" and args[2] then
        self:startFollow(args[2])
        
    elseif command == ".headsit" and args[2] then
        self:startHeadsit(args[2])
        
    elseif command == ".carpet" and args[2] then
        self:startCarpet(args[2])
        
    elseif command == ".fling" and args[2] then
        if not self:startFling(args[2]) then
            game:GetService("TextChatService").TextChannels.RBXGeneral:SendAsync("[BOT] too far!")
        end
        
    elseif command == ".dance" and args[2] then
        self:startDance(args[2])
        
    elseif command == ".like" and args[2] then
        self:sendLike(args[2])
        
    elseif command == ".bang" and args[2] then
        self:startBang(args[2])
        
    elseif command == ".spin" then
        self:startSpin(args[2])
        
    elseif command == ".jump" then
        self:startJump()
        
    elseif command == ".goto" and args[2] then
        self:startGoto(args[2])
        
    elseif command == ".orbit" and args[2] then
        self:startOrbit(args[2], args[3])
        
    elseif command == ".invite" and args[2] then
        self:sendFriendRequest(args[2])
        
    elseif command == ".look" and args[2] then
        self:startLook(args[2])
        
    elseif command == ".reset" then
        self:resetBot()
        
    elseif command == ".wave" and args[2] then
        if not self:startWave(args[2]) then
            game:GetService("TextChatService").TextChannels.RBXGeneral:SendAsync("[BOT] too far!")
        end
        
    elseif command == ".guard" and args[2] then
        self:startGuard(args[2])
        
    elseif command == ".speed" and args[2] then
        self:setSpeed(args[2])
        
    elseif command == ".stop" then
        self:stopAllEffects()
        -- –°–±—Ä–æ—Å–∏—Ç—å —Å–∫–æ—Ä–æ—Å—Ç—å –±–æ—Ç–∞
        local botPlayer = Players:FindFirstChild(BOT_NAME)
        if botPlayer and botPlayer.Character then
            local humanoid = botPlayer.Character:FindFirstChildOfClass("Humanoid")
            if humanoid then
                humanoid.WalkSpeed = 16
            end
        end
        game:GetService("TextChatService").TextChannels.RBXGeneral:SendAsync("[BOT] stopped all actions")
        
    elseif command == ".cmds" then
        self:showCommands(ownerPlayer)
    end
end

-- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã
function CommandSystem:init()
    Players.PlayerAdded:Connect(function(player)
        player.Chatted:Connect(function(message)
            self:processCommand(player, message)
        end)
    end)
    
    -- –û–±—Ä–∞–±–æ—Ç–∫–∞ —É–∂–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤
    for _, player in pairs(Players:GetPlayers()) do
        player.Chatted:Connect(function(message)
            self:processCommand(player, message)
        end)
    end
    
    print("–ë–æ—Ç –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω! –í–ª–∞–¥–µ–ª–µ—Ü: " .. OWNER_NAME)
    print("–ë–æ—Ç: " .. BOT_NAME)
    print("–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ .cmds –¥–ª—è —Å–ø–∏—Å–∫–∞ –∫–æ–º–∞–Ω–¥")
end

-- –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã
CommandSystem:init()
